!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("express"),require("express-favicon"),require("path")):"function"==typeof define&&define.amd?define(["express","express-favicon","path"],e):"object"==typeof exports?exports["hyperbox-js"]=e(require("express"),require("express-favicon"),require("path")):t["hyperbox-js"]=e(t.express,t["express-favicon"],t.path)}(self,(function(t,e,n){return o={257:t=>{function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function r(t){var e="function"==typeof Map?new Map:void 0;return(r=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return i(t,arguments,a(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),u(o,t)})(t)}function i(t,e,n){return(i=c()?Reflect.construct:function(t,e,n){var o=[null];o.push.apply(o,e);var r=new(Function.bind.apply(t,o));return n&&u(r,n.prototype),r}).apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(f,t);var e,r,i,s,l=(e=f,r=c(),function(){var t,n=a(e);if(r){var i=a(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return o(this,t)});function f(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),l.call(this)}return i=f,(s=[{key:"connectedCallback",value:function(){var t=this,e=this.constructor._BoxConfig;this._boxId=SharedBoxCore.getNewBoxId(e),this.id=this._boxId,this._name=e.name,e.styleSheetPath&&BoxLoader.LoadStylesheet(e.styleSheetPath),BoxUtils.BuildBoxStandardVariables(this),BoxUtils.BuildBoxInterfaces(this),BoxUtils.DisplayBox(this),this.detectBoxChanges=function(){return BoxUtils.DisplayBox(t)},"function"==typeof this.boxOnDisplayed&&this.boxOnDisplayed(),BoxUtils.AddBoxToLoadedBoxes(this),this._init=!0}},{key:"getParentBox",value:function(){return document.getElementById(this._parentBoxId)}},{key:"terminateSelf",value:function(){this._container.remove(),"function"==typeof this.boxOnDestroyed&&this.boxOnDestroyed()}},{key:"getBoxElementById",value:function(t){return document.getElementById("".concat(this._boxId,"-").concat(t))}},{key:"disconnectedCallback",value:function(){"function"==typeof this.boxOnDestroyed&&this.boxOnDestroyed()}}])&&n(i.prototype,s),f}(r(HTMLElement));t.exports={Box:s}},563:()=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function n(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach((function(e){a(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?c(e):n}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(y,Box);var e,s,l,f,p=(l=y,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=u(l);if(f){var n=u(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return i(this,t)});function y(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),a(c(t=p.call(this)),"display",(function(){return'\n      <div class="dialog-underlay" onclick="'.concat(t._context,'.underlayOnClicked()">\n        <div class="dialog-container">\n          <div>\n            <div class="dialog-header">\n              ').concat(t.getTitle(),'\n            </div>\n            <div id="').concat(t._boxId,'-container">\n              \x3c!-- Box is inserted here... --\x3e\n              ').concat(t.getInnerBox(),'\n            </div>\n          </div>\n          <div class="dialog-footer">\n            ').concat(t.getCancelButton(),"\n            ").concat(t.getAcceptButton(),"\n          </div>\n        </div>\n      </div>\n    ")})),t}return e=y,(s=[{key:"insertDialogInnerBox",value:function(t,e,o,r){var i=this;this.innerBox=SharedBoxCore.makeBox(t,this._boxId),this.set_dialogContext(n({},e)),this.innerBox._dialogContext={closeOnSuccess:function(){i.innerBox.terminateSelf(),i.terminateSelf();for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];o(e)},closeOnError:function(){i.innerBox.terminateSelf(),i.terminateSelf();for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];r(e)},arguments:n({},e)},"function"==typeof this.innerBox.boxOnNavigatedTo&&this.innerBox.boxOnNavigatedTo()}},{key:"getCancelButton",value:function(){return this._dialogContext.cancelButtonText?'\n      <button \n        class="margin-right-8"\n        onclick="'.concat(this._context,'.innerBox._dialogContext.closeOnSuccess(false)"\n      >\n        ').concat(this._dialogContext.cancelButtonText,"\n      </button>\n      "):""}},{key:"getAcceptButton",value:function(){return this._dialogContext.acceptButtonText?'\n      <button \n        onclick="'.concat(this._context,'.innerBox._dialogContext.closeOnSuccess(true)"\n      >\n        ').concat(this._dialogContext.acceptButtonText,"\n      </button>\n      "):""}},{key:"getTitle",value:function(){return this._dialogContext.title?"<h2>".concat(this._dialogContext.title,"<h2>"):""}},{key:"getInnerBox",value:function(){return this.innerBox?this.innerBox.display(this.innerBox):""}},{key:"underlayOnClicked",value:function(){this.innerBox&&this._dialogContext.closeable&&this.innerBox._dialogContext.closeOnSuccess(!0)}}])&&o(e.prototype,s),y}();a(s,"_BoxConfig",{name:"DialogBox",styleSheetPath:"./box-core/core-boxes/dialog/dialog.box.css"}),a(s,"_BoxInterface",{_dialogContext:{}})},700:(t,e,n)=>{var o=n(286).NavigatorBox,r=n(563).DialogBox;t.exports={NavigatorBox:o,DialogBox:r}},286:()=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?r(e):n}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=function(u){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}(y,Box);var a,s,l,f,p=(l=y,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=i(l);if(f){var n=i(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return o(this,t)});function y(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),c(r(t=p.call(this)),"boxOnDisplayed",(function(){console.log("aa nav box",r(t)),t.dispatchNavigatorOnLoaded()})),c(r(t),"display",(function(){return"".concat(t.getCurrentBox())})),t}return a=y,(s=[{key:"setRoutes",value:function(t,e){this._routes=t,e&&e.savesRouteState&&(this._loadedRoutes=new Map)}},{key:"cleanupOldBox",value:function(){this.currentBox&&("function"==typeof this.currentBox.boxOnDestroyed&&this.currentBox.boxOnDestroyed(),this.setCurrentBox(null))}},{key:"addArgumentsToCurrentBox",value:function(e){this.currentBox&&e&&"object"===t(e)&&(this.currentBox._routeContext=e),this.currentBox.detectBoxChanges()}},{key:"getCurrentBox",value:function(){return this.currentBox?this.currentBox.display(this.currentBox):""}},{key:"setCurrentBox",value:function(t){this.currentBox=t,this.innerHTML=this.getCurrentBox()}},{key:"gotoRoute",value:function(t,e){var n=this._routes[t];if(console.log("aa this navigator id",this._boxId),!n)throw new Error('BoxJS: Could not find route "'.concat(t,'"'));this.cleanupOldBox();var o,r=n.boxClassName;this._loadedRoutes&&this._loadedRoutes.get(t)?o=this._loadedRoutes.get(t):(o=SharedBoxCore.makeBox(r,this._boxId),this._loadedRoutes&&this._loadedRoutes.set(t,o)),this.setCurrentBox(o),this.addArgumentsToCurrentBox(e),"function"==typeof this.currentBox.boxOnNavigatedTo&&this.currentBox.boxOnNavigatedTo()}}])&&e(a.prototype,s),y}();c(u,"_BoxConfig",{name:"NavigatorBox"}),c(u,"_BoxInterface",{Outputs:{navigatorOnLoaded:null}})},352:(t,e,n)=>{function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=n(257).Box,u=n(700),a=n(291);t.exports=r(r({Box:c},u),{},{startBoxServer:a})},291:(t,e,n)=>{var o=n(391),r=n(880),i=n(549),c=process.env.PORT||2021;t.exports=function(t){var e=o(),n=t+"/public",u=t+"/dist";console.log("HyperBox: starting up application..."),e.use(r(n+"/favicon.ico")),e.use(o.static(u)),e.get("*",(function(t,e){e.sendFile(i.resolve(u,"index.html"))})),e.listen(c,(function(){console.log("HyperBox: application running on port ".concat(c," 🚀"))}))}},391:e=>{"use strict";e.exports=t},880:t=>{"use strict";t.exports=e},549:t=>{"use strict";t.exports=n}},r={},function t(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={exports:{}};return o[e](i,i.exports,t),i.exports}(352);var o,r}));